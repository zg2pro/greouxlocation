!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("ng2-dragula"),require("@angular/common"),require("@angular/material")):"function"==typeof define&&define.amd?define(["exports","@angular/core","ng2-dragula","@angular/common","@angular/material"],n):n(e["ng2-image-gallery"]=e["ng2-image-gallery"]||{},e.ng.core,e.ng2Dragula,e.ng.common,e.ng.material)}(this,function(e,n,t,i,a){"use strict";var o=function(e,n,t,i){var a,o=arguments.length,r=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,n,t,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(n,t,r):a(n,t))||r);return o>3&&r&&Object.defineProperty(n,t,r),r},r=function(e,n){return function(t,i){n(t,i,e)}};e.Ng2ImageGalleryComponent=function(){function e(e){var t=this;this.dragulaService=e,this.images=[],this.draggable=!1,this.asImage="image",this.asThumbnail="thumbnail",this.asText="text",this.actionText="",this.actionEmitter=new n.EventEmitter,this.dropEmitter=new n.EventEmitter,this.loading=!1,this.curImageIndex=0,this.curThumbnailIndex=0,this.isLightboxOpen=!1,e.drop.subscribe(function(e){t.onDrop(e.slice(1))})}return e.prototype.ngOnChanges=function(e){e.images&&(this.images=e.images.currentValue)},e.prototype.openLightboxGallery=function(e){var n=this;this.isLightboxOpen=!0,setTimeout(function(){n.curImageIndex=e-1,n.nextImage(),n.loading=!1},0)},e.prototype.closeLightboxGallery=function(){this.isLightboxOpen=!1},e.prototype.nextImage=function(){this.curImageIndex!==this.images.length-1&&(this.loading=!0,this.curImageIndex++,this.curThumbnailIndex=this.curImageIndex)},e.prototype.previousImage=function(){this.loading=!0,0!==this.curImageIndex&&this.curImageIndex--,this.curThumbnailIndex=this.curImageIndex},e.prototype.toImage=function(e){this.loading=!0,this.curImageIndex=e,this.curThumbnailIndex=this.curImageIndex},e.prototype.thumbnailsNext=function(){this.curThumbnailIndex+5<this.images.length?this.curThumbnailIndex+=5:this.curThumbnailIndex=this.images.length-1,this.curThumbnailIndex+=5},e.prototype.thumbnailsPrevious=function(){this.curThumbnailIndex-5>0?this.curThumbnailIndex-=5:this.curThumbnailIndex=0},e.prototype.onLoad=function(){this.loading=!1},e.prototype.onAction=function(e){this.actionEmitter.emit({image:e})},e.prototype.onDrop=function(e){e[0],e[1];this.dropEmitter.emit({images:this.images})},e}(),o([n.Input()],e.Ng2ImageGalleryComponent.prototype,"images",void 0),o([n.Input("draggable")],e.Ng2ImageGalleryComponent.prototype,"draggable",void 0),o([n.Input("asImage")],e.Ng2ImageGalleryComponent.prototype,"asImage",void 0),o([n.Input("asThumbnail")],e.Ng2ImageGalleryComponent.prototype,"asThumbnail",void 0),o([n.Input("asText")],e.Ng2ImageGalleryComponent.prototype,"asText",void 0),o([n.Input("actionText")],e.Ng2ImageGalleryComponent.prototype,"actionText",void 0),o([n.Output("onAction")],e.Ng2ImageGalleryComponent.prototype,"actionEmitter",void 0),o([n.Output("onDrop")],e.Ng2ImageGalleryComponent.prototype,"dropEmitter",void 0),e.Ng2ImageGalleryComponent=o([n.Component({selector:"ng2-image-gallery",template:'\n    <div class="ng2-image-gallery-thumbnails" *ngIf="!draggable">\n        <div *ngFor="let image of images; let index=index" class="ng2-image-gallery-thumbnail-container">\n            <img [src]="image[asThumbnail]" (click)="openLightboxGallery(index)" class="ng2-image-gallery-thumbnail">\n            <button class="btn btn-primary ng2-image-gallery-action" *ngIf="actionText!==\'\'" (click)="onAction(image)" [innerHTML]="actionText"></button>\n        </div>\n    </div>\n    <div class="ng2-image-gallery-thumbnails" [dragula]="\'ng2-image-gallery-bag\'" [dragulaModel]=\'images\' *ngIf="draggable">\n        <div *ngFor="let image of images; let index=index" class="ng2-image-gallery-thumbnail-container">\n            <img [src]="image[asThumbnail]" (click)="openLightboxGallery(index)" class="ng2-image-gallery-thumbnail">\n            <button class="btn btn-primary ng2-image-gallery-action" *ngIf="actionText!==\'\'" (click)="onAction(image)" [innerHTML]="actionText"></button>\n        </div>\n    </div>\n    <to-body-displacer>\n        <div class="ng2-image-gallery-overlay" [hidden]="!isLightboxOpen">\n            <div class="ng2-image-gallery-lightbox">\n                <a class="ng2-igl-close" (click)="closeLightboxGallery()"><i class="fa fa-close"></i></a>\n                <a class="ng2-igl-nav-left" *ngIf="images.length >1 && curImageIndex!==0" (click)="previousImage()"><i class="fa fa-angle-left"></i></a>\n                <img [hidden]="loading" *ngIf="images.length>0" [src]="images[curImageIndex][asImage]" (click)="nextImage()" class="ng2-igl-img" (load)="onLoad()" />\n                <span [hidden]="!loading" *ngIf="images.length>0" class="ng2-igl-loading"><i class="fa fa-spinner fa-spin fa-3x" aria-hidden="true"></i></span>\n                <a class="ng2-igl-nav-right" *ngIf="images.length >1 && curImageIndex!==images.length-1" (click)="nextImage()"><i class="fa fa-angle-right"></i></a>\n                <span class="ng2-igl-text" *ngIf="images.length>0" [innerHTML]="images[curImageIndex][asText]"></span>\n                <span class="ng2-igl-count">{{curImageIndex+1}}/{{images.length}}</span>\n                <div class="ng2-igl-thumbnails">\n                    <a class="ng2-igl-nav-left thumbnails" [ngClass]="{\'non-visible\': curThumbnailIndex < 4 }" (click)="thumbnailsPrevious()"><i class="fa fa-angle-left"></i></a>\n                    <template ngFor let-image [ngForOf]="images" let-index="index">\n                        <img [src]="image[asThumbnail]" (click)="toImage(index)" \n                            *ngIf="(curThumbnailIndex>images.length-4 && index > images.length-8)||(curThumbnailIndex<4 && index < 7)||(index >= curThumbnailIndex -3) && (index <= curThumbnailIndex+3)"\n                            [ngClass]="{\'active\':curImageIndex===index}"\n                            class="ng2-igl-thumbnail rounded-circle">\n                    </template>\n                    <a class="ng2-igl-nav-right thumbnails" [ngClass]="{\'non-visible\': curThumbnailIndex > images.length-5 }" (click)="thumbnailsNext()"><i class="fa fa-angle-right"></i></a>\n                </div>\n            </div>\n        </div>\n    </to-body-displacer>'}),r(0,n.Inject(n.forwardRef(function(){return t.DragulaService})))],e.Ng2ImageGalleryComponent);var l=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),g=function(e,n,t,i){var a,o=arguments.length,r=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,n,t,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(n,t,r):a(n,t))||r);return o>3&&r&&Object.defineProperty(n,t,r),r},c=function(e,n){return function(t,i){n(t,i,e)}};e.DisplacerPortalDirective=function(e){function n(n,t){return e.call(this,n,t)||this}return l(n,e),n}(a.TemplatePortal),e.DisplacerPortalDirective=g([n.Directive({selector:"[displacerPortal]"}),c(0,n.Inject(n.forwardRef(function(){return n.TemplateRef}))),c(1,n.Inject(n.forwardRef(function(){return n.ViewContainerRef})))],e.DisplacerPortalDirective),e.DisplacerComponent=function(){function e(e){this._overlay=e,this._config=new a.OverlayState,this._overlayRef=void 0}return e.prototype.ngOnDestroy=function(){this._overlayRef.detach()},e.prototype.ngAfterViewInit=function(){this._overlayRef=this._overlay.create(this._config),this._overlayRef.attach(this._portal)},e}(),g([n.ViewChild(e.DisplacerPortalDirective)],e.DisplacerComponent.prototype,"_portal",void 0),e.DisplacerComponent=g([n.Component({selector:"to-body-displacer",template:"<template displacerPortal>\n  <ng-content></ng-content>\n  </template>"}),c(0,n.Inject(n.forwardRef(function(){return a.Overlay})))],e.DisplacerComponent);var s=function(e,n,t,i){var a,o=arguments.length,r=o<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,n,t,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(o<3?a(r):o>3?a(n,t,r):a(n,t))||r);return o>3&&r&&Object.defineProperty(n,t,r),r};e.Ng2ImageGalleryModule=function(){function e(){}return e}(),e.Ng2ImageGalleryModule=s([n.NgModule({imports:[i.CommonModule,t.DragulaModule,a.MaterialModule.forRoot()],declarations:[e.DisplacerPortalDirective,e.DisplacerComponent,e.Ng2ImageGalleryComponent],exports:[e.Ng2ImageGalleryComponent]})],e.Ng2ImageGalleryModule),Object.defineProperty(e,"__esModule",{value:!0})});